# Messenger Application

> Полнофункциональное приложение для обмена сообщениями с микросервисной архитектурой

---

## Статистика проекта

### Общая информация

<table>
<tr>
<td align="center"><strong>Всего файлов</strong></td>
<td align="center"><strong>Строк кода</strong></td>
<td align="center"><strong>Комментариев</strong></td>
</tr>
<tr>
<td align="center"><h2>221</h2></td>
<td align="center"><h2>30,086</h2></td>
<td align="center"><h2>1,869</h2></td>
</tr>
</table>

---

### Распределение по языкам программирования (tokei)

| Язык           | Файлов | Всего строк | Код   | Комментарии | Пустые строки | % от кода |
|:---------------|-------:|------------:|------:|------------:|--------------:|----------:|
| **Java**       | 160    | 19,197      | 15,784| 901         | 2,512         | **64.2%** |
| **JSX**        | 16     | 6,100       | 5,115 | 401         | 584           | **20.8%** |
| **JavaScript** | 22     | 2,406       | 1,840 | 270         | 296           | **7.5%**  |
| **Shell**      | 3      | 777         | 552   | 147         | 78            | **2.2%**  |
| **XML**        | 5      | 718         | 642   | 27          | 49            | **2.6%**  |
| **Batch**      | 2      | 298         | 268   | 0           | 30            | **1.1%**  |
| **YAML**       | 5      | 256         | 215   | 14          | 27            | **0.9%**  |
| **CSS**        | 3      | 112         | 96    | 4           | 12            | **0.4%**  |



---

### Архитектура проекта

Проект построен на **микросервисной архитектуре** и включает:

#### Backend сервисы (Java/Spring Boot)
- **Authorization Service** - Сервис авторизации и аутентификации
- **Core API Service** - Основной API сервис
- **Gateway** - API Gateway для маршрутизации запросов
- **WebSocket Server** - Сервер для обработки WebSocket соединений

#### Frontend (React)
- **front_messenger** - Веб-интерфейс на React с использованием Tailwind CSS

#### Инфраструктура
- Docker Compose для оркестрации сервисов
- Maven для сборки Java проектов
- Vite для сборки фронтенда

---

### E2EE (сквозное шифрование)

В проекте реализовано сквозное шифрование сообщений (E2EE) на основе современных криптографических протоколов:

- **Алгоритм шифрования:** AES-GCM (симметричное шифрование)
- **Обмен ключами:** X3DH (Extended Triple Diffie-Hellman)
- **Forward Secrecy:** смена ключей после каждого сообщения (Double Ratchet)
- **Генерация и хранение ключей:** приватные ключи хранятся только на клиенте, публичные публикуются на сервере
- **Шифрование всех сообщений:** каждое сообщение шифруется уникальным ключом с использованием Double Ratchet
- **Безопасность:** даже сервер не может расшифровать содержимое сообщений

**Технологии:** Web Crypto API, собственная реализация X3DH и Double Ratchet, интеграция с React

---

### Технологический стек

**Backend:**
- Java + Spring Boot
- Maven
- WebSocket
- REST API

**Frontend:**
- React (JSX)
- Vite
- Tailwind CSS
- ESLint

**DevOps:**
- Docker & Docker Compose
- Shell Scripts
- Batch Scripts

---

## Покрытие тестами и анализ JaCoCo

### Статистика тестов

| Модуль                 | Кол-во тестов |
|:---------------------- | ------------:|
| Authorization Service  | 49           |
| Core API Service       | 376          |
| Gateway                | 113          |
| WebSocket Server       | 221          |
| **Всего**              | **759**      |

| Язык | Файлов | Всего строк | Код | Комментарии |
|:-----|-------:|------------:|----:|------------:|
| **Java (тесты)** | 63 | 9,879 | 8,812 | 57 |

---

### Покрытие по JaCoCo

- **Authorization_service**: покрытие инструкций 89%, ветвлений 87%. 
- **core-api-service**: покрытие инструкций 76%, ветвлений 66%. 
- **gateway**: покрытие инструкций 85%, ветвлений 72%. 
- **websocket_server**: покрытие инструкций 73%, ветвлений 76%. 

---

## Документация

### API Documentation (JavaDoc)

Объединённая JavaDoc документация для всех backend модулей доступна в директории `docs/api/`.

**Быстрый доступ:**
- **[Главная страница документации](docs/api/index.html)** - обзор всех модулей
- **[Authorization Service API](docs/api/authorization-service/index.html)** - документация сервиса авторизации
- **[Core API Service API](docs/api/core-api-service/index.html)** - документация основного API
- **[Gateway API](docs/api/gateway/index.html)** - документация API Gateway
- **[WebSocket Server API](docs/api/websocket-server/index.html)** - документация WebSocket сервера



---
